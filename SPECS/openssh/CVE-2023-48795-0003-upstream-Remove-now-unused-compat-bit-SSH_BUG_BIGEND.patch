From 0833ccf2c8b7ae08b296c06f17bd53e3ab94b0b0 Mon Sep 17 00:00:00 2001
From: "dtucker@openbsd.org" <dtucker@openbsd.org>
Date: Fri, 17 Feb 2023 03:06:18 +0000
Subject: [PATCH] upstream: Remove now-unused compat bit SSH_BUG_BIGENDIANAES.
 This

was previously set for OpenSSH 2.3 (released in 2000) but this check was
removed in OpenSSH 7.7 (2018).  ok djm@ deraadt@

OpenBSD-Commit-ID: 326426ea328707fc9e83305291ab135c87f678af
---
 compat.c | 12 ++----------
 compat.h |  4 ++--
 2 files changed, 4 insertions(+), 12 deletions(-)

diff --git a/compat.c b/compat.c
index 3d40f1a3d..ad04328d5 100644
--- a/compat.c
+++ b/compat.c
@@ -142,15 +142,7 @@ compat_banner(struct ssh *ssh, const char *version)
 char *
 compat_cipher_proposal(struct ssh *ssh, char *cipher_prop)
 {
-	if (!(ssh->compat & SSH_BUG_BIGENDIANAES))
-		return xstrdup(cipher_prop);
-	debug2_f("original cipher proposal: %s", cipher_prop);
-	if ((cipher_prop = match_filter_denylist(cipher_prop, "aes*")) == NULL)
-		fatal("match_filter_denylist failed");
-	debug2_f("compat cipher proposal: %s", cipher_prop);
-	if (*cipher_prop == '\0')
-		fatal("No supported ciphers found");
-	return cipher_prop;
+	return xstrdup(cipher_prop);
 }
 
 /* Always returns pointer to allocated memory, caller must free. */
diff --git a/compat.h b/compat.h
index 9abe056dd..8d0ea2d68 100644
--- a/compat.h
+++ b/compat.h
@@ -39,7 +39,7 @@
 /* #define unused		0x00000200 */
 #define SSH_BUG_PASSWORDPAD	0x00000400
 #define SSH_BUG_SCANNER		0x00000800
-#define SSH_BUG_BIGENDIANAES	0x00001000
+/* #define unused		0x00001000 */
 #define SSH_BUG_RSASIGMD5	0x00002000
 #define SSH_OLD_DHGEX		0x00004000
 #define SSH_BUG_NOREKEY		0x00008000
-- 
2.34.1

